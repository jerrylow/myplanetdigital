@import "includes.less";

html, body {
	margin:0;
	padding:0;
	-webkit-font-smoothing: antialiased;
   -webkit-text-size-adjust: 100%;
   -ms-text-size-adjust: 100%;
}

a, a:focus, a:active{
  outline:0 !important;
}

body {
	background: #444;

	&.loaded {
		#viewport {
			//opacity:0.999;
			#main, #article {
				.transition-transform(@article-transition-time);
			}
		}
		#banner {
			.transition-transform(@article-transition-time, background 0.5s);
			.transform(translate3d(0,0,0));
			.hideBack();
		}
	}
	&.scrolling * {
		pointer-events:none !important;
	}
}

#wrap {
	width:100%;
	min-height:100%;
	//max-width:1550px;
	margin:0 auto;
	overflow:hidden;
	position:relative;
	background: #ebebeb;

	[data-role="menu-ghost"] {
	  display:none;
	  top: 0;
	  width: 100%;
	  height:75px;
	  position: fixed;
	  .translateZ();
	  z-index:0;
	}

	@media only screen and (max-width: 767px) {
	  [data-role="menu-ghost"] {
	  	//width: auto;
	  	left: 0;
	  	right: 105px;
	    height: 62px !important;
	  }
	}
	@media screen and (min-width: 1175px) {
	  [data-role="menu-ghost"] {
	    height: 145px;	  }
	  #menu {
	    margin-left: 0px;
	  }
	}
}

#viewport {
	width:100%;
	height:100%;
	font-size:0;
	white-space:nowrap;
	.transition-transform();

	#main, #article {
		.border-box();
		.hideBack();
		opacity:0.999;
		//.transition-transform(@article-transition-time);// ease-in-out);
		white-space:normal;
		vertical-align: top;
		font-size:initial;
		display:inline-block;
		min-height:100%;
		width:100%;
		position:relative;
		padding:0;

		> .main-wrap {
			max-width:@max-width;
			margin:-38px auto @footer-height;
			min-height:100%;
		}
	}

	#article {
		.transform(translate3d(-1px,0,0));//-1px, 0, 0));
	}

	#main {
		.transform(translate3d(0,0,0));
		margin-top:557px;
		background: #ebebeb;
		z-index:1;
		@media only screen and (max-width :1174px) {
	        margin-top: 420px;
	    }
	    @media only screen and (max-width :900px) {
	        margin-top: 330px;
	    }
	    @media only screen and (max-width :767px) {
	        margin-top: 297px;
	    }
	    @media only screen and (max-width :600px) {
	        margin-top: 282px;
	    }
	}

	@media screen and (max-width: 1174px) {
		#main > .main-wrap {
			margin: -38px auto 30px;
		}
	}
	@media screen and (max-width: 767px) {
		#main > .main-wrap {
			margin: -38px auto 20px;
		}
	}

	#article {
		top:0;
	//	padding: 0 0 0 1px;
		position: absolute;
		outline:none;
	//	margin-left:-1px;
		//.footer {
		//	margin:0 -1px;
		//}
	}

	.loading-overlay, .loading-overlay-tiles {
		display: none;
		position: absolute;
		width: 100%;
		height: 200%;
		top: 0;
		left: 0;
		background: #f0f0f0;
		z-index: 3;

		.loading-spinner {
			position: absolute;
			top: 300px;
			left: 50%;
			margin-left: -61px;
			width: 122px;
			height: 122px;
			background: url('../images/loading.gif');
			background-size: 122px;
			.border-radius(61px);
		}
	}
	.loading-overlay-tiles {
		top:-557px;
		@media only screen and (max-width :1174px) {
	        top: -360px;
	    }
	    @media only screen and (max-width :900px) {
	        top: -290px;
	    }
	}
}

body.article {
	#viewport #main, #viewport #article, #banner {
		//.translate3d(~"calc(-100% + 1px)",0,0);
		.translate3d(-100%,0,0);
	}
}

#logo {
	height:81px;
	width:81px;
	font-size:0;
	background:url('../images/spritempd.png') no-repeat 0 -120px;
	background-size:434px auto;
	position:fixed;
	.translateZ();
	.user-select();
	top:29px;
	left:50%;
	z-index:4;
	margin-left:-(@max-width/2 + @logo-width + @logo-gutter-width);
	@media only screen and (max-width : 1324px) {
		left:@logo-gutter-width;
		margin-left:0;
	}
	@media only screen and (min-width : 1173px) {
		display: none;
	}
	a {
		height: 100%;
		width: 100%;
		text-decoration: none;
		display: inline-block;
	}
}

body {
	#back {
		width: 124px;
		height: 125px;
		font-size: 0;
		background: url('../images/spritempd.png') no-repeat  -136px -414px;
		background-size: 490px auto;
		position: fixed;
		.transform(translate3d(20px,-52px,0) scale(0.45));
		.user-select();
		z-index:3;
		top:33px;
		right: 50%;
		margin-right:-550px;
		opacity: 0;
		pointer-events: none;
		.transition-transform(0.4s ease, opacity 0.7s);
		&.reveal {
			opacity: 0.999;
			a.light:after {
				opacity:0.999;
			}
		}
		&.hover {
			.transform(translate3d(20px, -52px, 0) scale(.51));
		}
		a {
			height: 100%;
			width: 100%;
			text-decoration: none;
			display: inline-block;
			@media only screen and (min-width :  1174px) {
				&:after {
					content: '';
					background: url('../images/spritempd.png') no-repeat -264px -425px;
					background-size:500px auto;
					opacity:0.001;
					position:absolute;
					top:0;
					bottom:0;
					left:0;
					right:0;
					.transform(translateZ(0));
					.transition(opacity 0.4s);
				}
			}
		}

		@media only screen and (max-width :  1174px) {
			top: 8px;
			right: 61px;
			width: 44px;
			height: 44px;
			margin-right: 0;
			background-size: 250px;
			background-position: -211px -170px;
			.translateZ();
		}
	}
	&.article {
		#back {
			pointer-events: auto;
		}
	}
	&.article.menu {
		pointer-events: none;
	}
}

#menu-toggle {
	display:none;
	@media only screen and (max-width :1174px) {
		display:block;
		position:fixed;
		right:@logo-gutter-width - 11px;
		.translateZ();
		top:11px;
		height: 44px;
		width: 44px;
		z-index:3;
		font-size:0;
		cursor:pointer;
		.user-select();

		#menu-button {
			position: relative;
			top: 20px;
			left: 12px;
			width: 20px;
			height: 4px;
			background-color: #000;
			&:focus {
				outline:none;
			}
			&:before {
				content: '';
				position: absolute;
				top: -7px;
				left: 0;
				width: 20px;
				height: 4px;
				background-color: #000;
			}
			&:after {
				content: '';
				position:absolute;
				top: 7px;
				left: 0;
				width: 20px;
				height:4px;
				background-color:#000;
			}
		}
	}
}

#menu {
	position: fixed;
	.translateZ();
	.border-box();
	top:0;
	z-index:2;
	width:100%;
}

.footer {
	margin:0;
}

a[href^=tel]{
    color:inherit;
    text-decoration:none;
}

@media only screen and (max-width :1174px) {
	body {
		background: #f0f0f0;
		&.loaded  {
			#viewport #main, #viewport #article, #banner {
				.transition-transform(@transition-time);
			}
		}
		&.desktop-capable {
			#logo:hover {
				background-position: 0px -133px;
			}
		}
	}
	#viewport {
		#main, #article {
			//padding-top:@ipad-menu-height;
			> .main-wrap {
				margin-top: 10px;
			}
		}
		#article {
			padding-top:@ipad-menu-height;
		}
	}

	#logo {
		top: 8px;
		left: 20px;
		height: 90px;
		width: 90px;
		background-size: 481px auto;
		background-position: 0 -40px;
	}
	#logo, #menu, #menu-toggle, #back {
		.transition-transform();
		.translateZ();
	}

	#menu {
		//left: ~"calc(100% - 1px)";
		left:100%;
		height:100%;
		width:251px;
		pointer-events:auto;
		.transition-transform(@transition-time, opacity 0 (@transition-time + 0.1s));
		// margin-left:-1px;
		// border:1px solid #fff;
		// margin-top:-1px;
		//border-bottom: 0;
	}
	#menu, #menu-toggle {
		pointer-events:auto;
	}
	#wrap [data-role="menu-ghost"] {
		height:@ipad-menu-height;
		display:block;
		width:100%;
		background:#fff;
		z-index:1;
		border-bottom:1px solid #cecece;
	//	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.125); //4px -1px 13px #ddd;
	}
	#article-cover-photo {
		top:@mobile-menu-height;
	}
	body.menu {
		pointer-events:none;
		.user-select();
		#logo, #viewport, #menu, #menu-toggle, #banner, #back {
			.translate3d(-249px,0,0);
		}
		#menu {
			.transition-transform(@transition-time);
			opacity:0.999;
		}
		#back {
			opacity: 0.001;
			.transition-transform(@transition-time, opacity @transition-time);
		}
	}
	&.ios {
		#viewport {
			.transform(none);
			.showBack();
			#main, #article {
				.translate3d(-249px,0,0);
			}
		}
		&.article #viewport {
			#main {
				.translate3d(-249px,0,0);
			}
			#article {
				.translate3d(~"calc(-100% - 249px)", 0, 0);
			}
		}
	}
}

@media only screen and (max-width: 767px) {
	#logo {
		top: 7px;
		height: 67px;
		width: 67px;
		background-size: 360px auto;
		background-position: 0 -30px;
	}
	body.desktop-capable {
		#logo {
			&:hover {
				background-position: 0 -99px;
			}
		}
	}
	[data-role="menu-ghost"] {
		height:@mobile-menu-height;
	}
	#viewport {
		#main, #article {
			//padding-top:@mobile-menu-height;

			> .main-wrap {
				margin-top: 10px;
			}
		}
		#article {
			padding-top:@mobile-menu-height;
		}
	}
}
